{"ast":null,"code":"import React,{useState,useEffect}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const FilterPanel=_ref=>{let{products,onFilterChange}=_ref;const[filters,setFilters]=useState({priceRange:[0,1000],stores:[],rating:0});const[storeOptions,setStoreOptions]=useState([]);const[expanded,setExpanded]=useState(true);// Extract all available stores from products\nuseEffect(()=>{if(products&&products.length>0){const stores=[...new Set(products.map(product=>product.store))];setStoreOptions(stores);// Initialize store filters to include all stores\nsetFilters(prev=>({...prev,stores:stores}));// Find max price for the range\nconst maxPrice=Math.max(...products.map(product=>product.price||0))+100;setFilters(prev=>({...prev,priceRange:[0,maxPrice]}));}},[products]);// Handle price range change\nconst handlePriceChange=(e,index)=>{const value=parseFloat(e.target.value);const newRange=[...filters.priceRange];newRange[index]=value;// Ensure min <= max\nif(index===0&&value>newRange[1]){newRange[1]=value;}else if(index===1&&value<newRange[0]){newRange[0]=value;}setFilters({...filters,priceRange:newRange});};// Handle store filter change\nconst handleStoreChange=(e,store)=>{const isChecked=e.target.checked;let newStores=[...filters.stores];if(isChecked){newStores.push(store);}else{newStores=newStores.filter(s=>s!==store);}setFilters({...filters,stores:newStores});};// Handle rating filter change\nconst handleRatingChange=e=>{const value=parseInt(e.target.value);setFilters({...filters,rating:value});};// Apply filters\nuseEffect(()=>{onFilterChange(filters);},[filters,onFilterChange]);// Toggle panel expansion\nconst toggleExpand=()=>{setExpanded(!expanded);};return/*#__PURE__*/_jsxs(\"div\",{className:`filter-panel ${expanded?'expanded':'collapsed'}`,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"filter-header\",onClick:toggleExpand,children:[/*#__PURE__*/_jsxs(\"h4\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-filter\"}),\" Filter\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"expand-toggle\",children:/*#__PURE__*/_jsx(\"i\",{className:`fas fa-chevron-${expanded?'up':'down'}`})})]}),expanded&&/*#__PURE__*/_jsxs(\"div\",{className:\"filter-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"filter-section\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Price Range\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"price-inputs\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"input-group-text\",children:\"$\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control min-price\",value:filters.priceRange[0],onChange:e=>handlePriceChange(e,0),min:\"0\"})]}),/*#__PURE__*/_jsx(\"span\",{className:\"price-separator\",children:\"to\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"input-group-text\",children:\"$\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control max-price\",value:filters.priceRange[1],onChange:e=>handlePriceChange(e,1),min:filters.priceRange[0]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-section\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Stores\"}),/*#__PURE__*/_jsx(\"div\",{className:\"store-options\",children:storeOptions.map(store=>/*#__PURE__*/_jsxs(\"div\",{className:\"form-check\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-check-input\",type:\"checkbox\",id:`store-${store}`,checked:filters.stores.includes(store),onChange:e=>handleStoreChange(e,store)}),/*#__PURE__*/_jsx(\"label\",{className:\"form-check-label\",htmlFor:`store-${store}`,children:store})]},store))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-section\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Minimum Rating\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"rating-slider\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"range\",className:\"form-range\",min:\"0\",max:\"5\",step:\"1\",value:filters.rating,onChange:handleRatingChange}),/*#__PURE__*/_jsx(\"div\",{className:\"rating-value\",children:[...Array(5)].map((_,i)=>/*#__PURE__*/_jsx(\"i\",{className:`fas fa-star ${i<filters.rating?'filled':''}`},i))})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-secondary reset-filters-btn\",onClick:()=>{setFilters({priceRange:[0,Math.max(...products.map(product=>product.price||0))+100],stores:[...new Set(products.map(product=>product.store))],rating:0});},children:\"Reset Filters\"})]})]});};export default FilterPanel;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","FilterPanel","_ref","products","onFilterChange","filters","setFilters","priceRange","stores","rating","storeOptions","setStoreOptions","expanded","setExpanded","length","Set","map","product","store","prev","maxPrice","Math","max","price","handlePriceChange","e","index","value","parseFloat","target","newRange","handleStoreChange","isChecked","checked","newStores","push","filter","s","handleRatingChange","parseInt","toggleExpand","className","children","onClick","type","onChange","min","id","includes","htmlFor","step","Array","_","i"],"sources":["/home/ieli15/Development/another_marketplace/frontend/src/components/FilterPanel.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\n\nconst FilterPanel = ({ products, onFilterChange }) => {\n  const [filters, setFilters] = useState({\n    priceRange: [0, 1000],\n    stores: [],\n    rating: 0\n  });\n  \n  const [storeOptions, setStoreOptions] = useState([]);\n  const [expanded, setExpanded] = useState(true);\n  \n  // Extract all available stores from products\n  useEffect(() => {\n    if (products && products.length > 0) {\n      const stores = [...new Set(products.map(product => product.store))];\n      setStoreOptions(stores);\n      \n      // Initialize store filters to include all stores\n      setFilters(prev => ({\n        ...prev,\n        stores: stores\n      }));\n      \n      // Find max price for the range\n      const maxPrice = Math.max(...products.map(product => product.price || 0)) + 100;\n      setFilters(prev => ({\n        ...prev,\n        priceRange: [0, maxPrice]\n      }));\n    }\n  }, [products]);\n  \n  // Handle price range change\n  const handlePriceChange = (e, index) => {\n    const value = parseFloat(e.target.value);\n    const newRange = [...filters.priceRange];\n    newRange[index] = value;\n    \n    // Ensure min <= max\n    if (index === 0 && value > newRange[1]) {\n      newRange[1] = value;\n    } else if (index === 1 && value < newRange[0]) {\n      newRange[0] = value;\n    }\n    \n    setFilters({\n      ...filters,\n      priceRange: newRange\n    });\n  };\n  \n  // Handle store filter change\n  const handleStoreChange = (e, store) => {\n    const isChecked = e.target.checked;\n    let newStores = [...filters.stores];\n    \n    if (isChecked) {\n      newStores.push(store);\n    } else {\n      newStores = newStores.filter(s => s !== store);\n    }\n    \n    setFilters({\n      ...filters,\n      stores: newStores\n    });\n  };\n  \n  // Handle rating filter change\n  const handleRatingChange = (e) => {\n    const value = parseInt(e.target.value);\n    setFilters({\n      ...filters,\n      rating: value\n    });\n  };\n  \n  // Apply filters\n  useEffect(() => {\n    onFilterChange(filters);\n  }, [filters, onFilterChange]);\n  \n  // Toggle panel expansion\n  const toggleExpand = () => {\n    setExpanded(!expanded);\n  };\n  \n  return (\n    <div className={`filter-panel ${expanded ? 'expanded' : 'collapsed'}`}>\n      <div className=\"filter-header\" onClick={toggleExpand}>\n        <h4>\n          <i className=\"fas fa-filter\"></i> Filter\n        </h4>\n        <button className=\"expand-toggle\">\n          <i className={`fas fa-chevron-${expanded ? 'up' : 'down'}`}></i>\n        </button>\n      </div>\n      \n      {expanded && (\n        <div className=\"filter-content\">\n          {/* Price Range Filter */}\n          <div className=\"filter-section\">\n            <h5>Price Range</h5>\n            <div className=\"price-inputs\">\n              <div className=\"input-group\">\n                <span className=\"input-group-text\">$</span>\n                <input\n                  type=\"number\"\n                  className=\"form-control min-price\"\n                  value={filters.priceRange[0]}\n                  onChange={(e) => handlePriceChange(e, 0)}\n                  min=\"0\"\n                />\n              </div>\n              <span className=\"price-separator\">to</span>\n              <div className=\"input-group\">\n                <span className=\"input-group-text\">$</span>\n                <input\n                  type=\"number\"\n                  className=\"form-control max-price\"\n                  value={filters.priceRange[1]}\n                  onChange={(e) => handlePriceChange(e, 1)}\n                  min={filters.priceRange[0]}\n                />\n              </div>\n            </div>\n          </div>\n          \n          {/* Stores Filter */}\n          <div className=\"filter-section\">\n            <h5>Stores</h5>\n            <div className=\"store-options\">\n              {storeOptions.map(store => (\n                <div className=\"form-check\" key={store}>\n                  <input\n                    className=\"form-check-input\"\n                    type=\"checkbox\"\n                    id={`store-${store}`}\n                    checked={filters.stores.includes(store)}\n                    onChange={(e) => handleStoreChange(e, store)}\n                  />\n                  <label className=\"form-check-label\" htmlFor={`store-${store}`}>\n                    {store}\n                  </label>\n                </div>\n              ))}\n            </div>\n          </div>\n          \n          {/* Rating Filter */}\n          <div className=\"filter-section\">\n            <h5>Minimum Rating</h5>\n            <div className=\"rating-slider\">\n              <input\n                type=\"range\"\n                className=\"form-range\"\n                min=\"0\"\n                max=\"5\"\n                step=\"1\"\n                value={filters.rating}\n                onChange={handleRatingChange}\n              />\n              <div className=\"rating-value\">\n                {[...Array(5)].map((_, i) => (\n                  <i \n                    key={i}\n                    className={`fas fa-star ${i < filters.rating ? 'filled' : ''}`}\n                  ></i>\n                ))}\n              </div>\n            </div>\n          </div>\n          \n          {/* Reset Filters Button */}\n          <button\n            className=\"btn btn-outline-secondary reset-filters-btn\"\n            onClick={() => {\n              setFilters({\n                priceRange: [0, Math.max(...products.map(product => product.price || 0)) + 100],\n                stores: [...new Set(products.map(product => product.store))],\n                rating: 0\n              });\n            }}\n          >\n            Reset Filters\n          </button>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default FilterPanel;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}